START
TYPE TABLETYPE TABLE(1:6);
BEGIN
  ITEM ITEM1 U;
END

DEF TABLE GLOBAL1 TABLETYPE = 1,2,3,4,5,6;
DEF TABLE GLOBAL2 TABLETYPE = 7,8,9,0,1,2;
DEF TABLE GLOBAL3 TABLETYPE = 3,4,5,6,7,8;
DEF TABLE GLOBAL4 TABLETYPE = 9,0,1,2,3,4;
DEF TABLE GLOBAL5 TABLETYPE = 5,6,7,8,9,0;
DEF TABLE GLOBAL6 TABLETYPE = 1,2,3,4,5,6;

DEF PROC ONE(AREAPTR);
BEGIN
   ITEM AREAPTR P;
   ITEM PTR P TABLETYPE;
   PTR = (* P TABLETYPE *)(AREAPTR);
   FOR I:1 BY 1 WHILE I<=6;
   BEGIN
      ITEM1(I)@PTR=1;
   END
END

DEF PROC PROC2(SEQ) S;
BEGIN
   ITEM SEQ S;
   ITEM TOTAL S;
   TABLE TABLE1 STATIC(1:6) U = 0,0,0,0,0,0;
   TABLE TABLE2 STATIC(1:6) P TABLETYPE = NULL, NULL, NULL, NULL, NULL, NULL;
   TOTAL = 0;
   IF(SEQ=0);
   BEGIN
      TABLE1(1) = 1;
      TABLE1(2) = 2;
      TABLE1(3) = 3;
      TABLE1(4) = 4;
      TABLE1(5) = 5;
      TABLE1(6) = 6;
      TABLE2(1) = LOC(GLOBAL1);
      TABLE2(2) = LOC(GLOBAL2);
      TABLE2(3) = LOC(GLOBAL3);
      TABLE2(4) = LOC(GLOBAL4);
      TABLE2(5) = LOC(GLOBAL5);
      TABLE2(6) = LOC(GLOBAL6);
   END
   ELSE
   BEGIN
      FOR I:1 BY 1 WHILE I<=6;
      BEGIN
         ONE(TABLE2(I));
         TOTAL=TOTAL+TABLE1(I);
         FOR J:1 BY 1 WHILE J<=6;
         BEGIN
            TOTAL=TOTAL+ITEM1(J)@(TABLE2(I));
         END
      END
   END
   PROC2=TOTAL;
END

DEF PROC main S;
BEGIN
   ITEM RESULT S;
   RESULT = PROC2(0);
   RESULT = PROC2(1);
   main = RESULT - 57;
END
TERM
