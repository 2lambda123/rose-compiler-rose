# Example Makefile for ROSE users
# This makefile is provided as an example of how to use ROSE when ROSE is
# installed (using "make install").  This makefile is tested as part of the
# "make distcheck" rule (run as part of tests before any CVS checkin).
# The test of this makefile can also be run by using the "make installcheck"
# rule (run as part of "make distcheck").

# Location of include directory after "make install"
ROSE_INCLUDE_DIR = @prefix@/include

# Location of library directory after "make install"
ROSE_LIB_DIR = @prefix@/lib

ROSE_LIBS = $(ROSE_LIB_DIR)/librose.la

ROSE_SOURCE_DIR = @top_srcdir@/exampleTranslators/documentedExamples/simpleTranslatorExamples

# Default make rule to use
all: exampleTranslator

# Example suffix rule for more experienced makefile users
# .C.o:
#	g++ -c -I$(ROSE_INCLUDE_DIR) -o $@ $(@:.o=.C)

# Compile the exampleTranslator using the file identityTranslator.C
exampleTranslator.lo:
	@top_builddir@/libtool --mode=compile g++ -I$(ROSE_INCLUDE_DIR) -c -o exampleTranslator.lo $(ROSE_SOURCE_DIR)/identityTranslator.C

exampleTranslator: exampleTranslator.lo
	@top_builddir@/libtool --mode=link g++ -o exampleTranslator exampleTranslator.lo $(ROSE_LIBS)

# Rule used by make installcheck to verify correctness of installed libraries
check:
	./exampleTranslator -c $(ROSE_SOURCE_DIR)/testCode.C

